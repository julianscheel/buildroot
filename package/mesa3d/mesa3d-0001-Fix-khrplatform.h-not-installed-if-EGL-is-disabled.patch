From 35d4b4cdf67a069951eccf63dbf3fb9693366179 Mon Sep 17 00:00:00 2001
From: Eric Le Bihan <eric.le.bihan.dev@free.fr>
Date: Wed, 9 Apr 2014 12:48:36 +0200
Subject: [PATCH] Fix khrplatform.h not installed if EGL is disabled.

KHR/khrplatform.h is required by the EGL, GLES and VG headers, but is
only installed if Mesa3d is compiled with EGL support.

This patch installs this header file unconditionally.

Patch sent upstream: https://bugs.freedesktop.org/show_bug.cgi?id=77240

Signed-off-by: Eric Le Bihan <eric.le.bihan.dev@free.fr>
---
 src/egl/main/Makefile.am | 3 ---
 src/mapi/Makefile.am     | 3 +++
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/egl/main/Makefile.am b/src/egl/main/Makefile.am
index 6746bcc..18e6f16 100644
--- a/src/egl/main/Makefile.am
+++ b/src/egl/main/Makefile.am
@@ -85,9 +85,6 @@ pkgconfigdir = $(libdir)/pkgconfig
 
 pkgconfig_DATA = egl.pc
 
-khrdir = $(includedir)/KHR
-khr_HEADERS = $(top_srcdir)/include/KHR/khrplatform.h
-
 egldir = $(includedir)/EGL
 egl_HEADERS = \
 	$(top_srcdir)/include/EGL/eglext.h \
diff --git a/src/mapi/Makefile.am b/src/mapi/Makefile.am
index 80ead82..09d1091 100644
--- a/src/mapi/Makefile.am
+++ b/src/mapi/Makefile.am
@@ -211,4 +211,7 @@ if HAVE_OPENVG
 SUBDIRS += vgapi
 endif
 
+khrdir = $(includedir)/KHR
+khr_HEADERS = $(top_srcdir)/include/KHR/khrplatform.h
+
 include $(top_srcdir)/install-lib-links.mk
-- 
1.9.3

